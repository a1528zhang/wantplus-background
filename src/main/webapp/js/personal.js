/**
 * Created by maverick on 16/1/2.
 */
//测试 json
var strjson = {
    "reason": "查询符合条件的商品",
    "state": 1,
    "data": [
        {
            "commodityId": 22,
            "commodityUploadUser": 1,
            "commodityLike": 12,
            "commodityCollection": 0,
            "commodityName": "可爱的蓝色袋子",
            "commodityPrice": 656,
            "userName": "beings.java",
            "commodityImgUrl": "http://7xpmhh.com1.z0.glb.clouddn.com/bluebag.jpg",
            "commodityUserImgUrl":
                [	 {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/6.jpg",userId:29},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/7.jpg",userId:30},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/2.png",userId:31},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/4.jpg",userId:32}
                ]
        },
        {
            "commodityId": 21,
            "commodityUploadUser": 2,
            "commodityLike": 14,
            "commodityCollection": 0,
            "commodityName": "纯白的椅子",
            "commodityPrice": 450,
            "userName": "beings.oc",
            "commodityImgUrl": "http://7xpmhh.com1.z0.glb.clouddn.com/desk.jpg",
            "commodityUserImgUrl":
                [	 {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/1.jpg",userId:24},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/6.jpg",userId:25},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/3.jpg",userId:26}
                ]
        },
        {
            "commodityId": 23,
            "commodityUploadUser": 3,
            "commodityLike": 15,
            "commodityCollection": 0,
            "commodityName": "小学生书包",
            "commodityPrice": 788,
            "userName": "beings.swift",
            "commodityImgUrl": "http://7xpbw2.com1.z0.glb.clouddn.com/3_20151229222445_bag_L.jpg",
            "commodityUserImgUrl":
                [	 {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/2.png",userId:1},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/1.jpg",userId:2},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/7.jpg",userId:3},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/3.jpg",userId:4},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/5.jpg",userId:5}
                ]
        },
        {
            "commodityId": 24,
            "commodityUploadUser": 4,
            "commodityLike": 16,
            "commodityCollection": 0,
            "commodityName": "高雅的茶壶",
            "commodityPrice": 666,
            "userName": "beings.js",
            "commodityImgUrl": "http://7xpbw2.com1.z0.glb.clouddn.com/4_20151229222515_tea_L.jpg",
            "commodityUserImgUrl":
                [	 {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/3.jpg",userId:33},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/1.jpg",userId:34}
                ]
        },
        {
            "commodityId": 25,
            "commodityUploadUser": 4,
            "commodityLike": 17,
            "commodityCollection": 0,
            "commodityName": "装豆豆的玻璃杯",
            "commodityPrice": 82,
            "userName": "beings.c",
            "commodityImgUrl": "http://7xpbw2.com1.z0.glb.clouddn.com/4_20151229222536_glassbag_L.jpg",
            "commodityUserImgUrl":
                [	 {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/4.jpg",userId:6},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/2.png",userId:7},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/1.jpg",userId:8},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/3.jpg",userId:9},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/7.jpg",userId:10},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/6.jpg",userId:11}
                ]
        },
        {
            "commodityId": 26,
            "commodityUploadUser": 5,
            "commodityLike": 19,
            "commodityCollection": 0,
            "commodityName": "黑的的杯子",
            "commodityPrice": 54,
            "userName": "beings.node",
            "commodityImgUrl": "http://7xpbw2.com1.z0.glb.clouddn.com/5_20151229222549_glass_L.jpg",
            "commodityUserImgUrl":
                [	 {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/5.jpg",userId:12},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/2.png",userId:13},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/1.jpg",userId:14},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/6.jpg",userId:15}
                ]
        },
        {
            "commodityId": 27,
            "commodityUploadUser": 6,
            "commodityLike": 28,
            "commodityCollection": 0,
            "commodityName": "红色的杯子",
            "commodityPrice": 6,
            "userName": "beings.go",
            "commodityImgUrl": "http://7xpbw2.com1.z0.glb.clouddn.com/6_20151229222559_light_L.jpg",
            "commodityUserImgUrl":
                [	 {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/1.jpg",userId:18},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/3.jpg",userId:19},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/7.jpg",userId:20},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/6.jpg",userId:21},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/5.jpg",userId:22},
                    {headImg:"http://7xpmhh.com1.z0.glb.clouddn.com/4.jpg",userId:23}
                ]
        }
    ]
}

// 定义各种 ID 的变量

//获取 data
var strjsondata = strjson.data;
//jsonid 就是 commdityId
var jsonid;
// 上传的作者
var JsonUpLoadUser;
// 喜欢的数量
var JsonLike;
// 收藏的数量
var JsonCollection;
// 商品名字
var JsonGoodsName;
// 价格
var JsonGoodsPrice;
// 名字
var JsonUserName;
// 商品图片
var JsonGoodsImg;




var IdGoodsLayer; //货物白色遮罩的 id
var IdGoodsMid;
var IdGoodsText; //货物的名字文字描述
var IdUserIconlike; //喜欢——未点击
var IdUserIconlikeRed; //喜欢——已经点击
var IdUserIconmark; //收藏
var IdGoodsPriceout; //价格
var IdWantUserInbox;




var IdWantIndexHeadimgBox;
var IdWantPushMidbox2;
//取出 json 中的各自值



// 加载玩网页后开始执行的程序
$(document).ready(function(){
    wantplus_index_for();
    wantplus_navbar ();
});

// 动态产生id
function wantplus_index_for(){
    for(i = 0 ; i < strjsondata.length; i++){
        jsonid = strjsondata[i].commodityId;
        JsonGoodsImg = strjsondata[i].commodityImgUrl;
        JsonGoodsName = strjsondata[i].commodityName;
        JsonGoodsPrice = "$ "+strjsondata[i].commodityPrice;


        IdGoodsLayer = 'id-goods-layer'+jsonid;
        IdGoodsMid = 'id-goods-mid'+jsonid;
        IdGoodsText = 'id-goods-text'+jsonid;
        IdUserIconlike = 'id-user-iconlike'+jsonid;
        IdUserIconmark = 'id-user-iconmark'+jsonid;
        IdGoodsPriceout = 'id-goods-priceout'+jsonid;
        IdUserIconlikeRed = 'id-user-iconlikered'+jsonid;
        IdWantUserInbox	= 'id-wantuser-inbox'+jsonid;
        IdWantPushMidbox2 = "id-wantuser-midbox2"+jsonid;

        // 获取头像数组的长度

        var userimglist = strjsondata[i].commodityUserImgUrl;
        var userimglength = userimglist.length;

        // 喜欢的数字
        JsonLike = "+" + strjsondata[i].commodityLike;





// 注入首页div中的数据
        wantplus_index_box(IdGoodsText,JsonGoodsName,IdGoodsLayer,IdUserIconlike,"/wantplus/icon/like.png",
            IdUserIconmark,"/wantplus/icon/mark.png",IdGoodsMid,JsonGoodsPrice,IdGoodsPriceout,
            JsonGoodsImg,IdGoodsLayer,IdGoodsText,IdUserIconlike,
            IdUserIconmark,IdUserIconlikeRed,"/wantplus/icon/like2.png",IdWantUserInbox,IdWantPushMidbox2,
            userimglist,userimglength,JsonLike);

// 触发详情弹出框的遮罩
        $(document).on('click','#'+IdGoodsLayer+','+'#'+IdGoodsMid,function(){
            $("#detailswindow").fadeToggle(100);
            $("body").addClass("want-scroll-hidden");
            $("#detailswindow").css("overflow-y"," visible");
        });
    }
}





